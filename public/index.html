<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>SAEM - Sistema de Agendamento de Ensaios Musicais</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <link rel="stylesheet" href="css/styles.css">
</head>
<body>
  <div class="app-container">
    <!-- Sidebar / Menu lateral -->
    <aside class="sidebar" id="sidebar">
      <div class="sidebar-header">
        <h1>SAEM</h1>
        <button id="sidebar-toggle" class="sidebar-toggle">
          <i class="fas fa-bars"></i>
        </button>
      </div>
      <div class="sidebar-content">
        <nav class="sidebar-nav">
          <ul>
            <li><a href="#" data-page="dashboard"><i class="fas fa-home"></i> <span>Dashboard</span></a></li>
            <li><a href="#" data-page="musicians"><i class="fas fa-music"></i> <span>Músicos</span></a></li>
            <li><a href="#" data-page="rehearsals"><i class="fas fa-calendar-alt"></i> <span>Ensaios</span></a></li>
            <li><a href="#" data-page="events"><i class="fas fa-star"></i> <span>Eventos</span></a></li>
            <li><a href="#" data-page="schedule"><i class="fas fa-calendar-check"></i> <span>Agenda</span></a></li>
            <li class="admin-only"><a href="#" data-page="users"><i class="fas fa-users"></i> <span>Usuários</span></a></li>
          </ul>
        </nav>
      </div>
      <div class="sidebar-footer">
        <a href="#" id="logout-btn"><i class="fas fa-sign-out-alt"></i> <span>Sair</span></a>
      </div>
    </aside>

    <!-- Conteúdo principal -->
    <main class="main-content">
      <header class="main-header">
        <div class="user-info">
          <span id="user-name">Carregando...</span>
          <span id="user-role">Carregando...</span>
        </div>
      </header>

      <!-- Container de páginas -->
      <div class="page-container">
        <!-- Página de Login -->
        <div class="page" id="login-page">
          <div class="login-container">
            <div class="login-header">
              <h2>SAEM</h2>
              <p>Sistema de Agendamento de Ensaios Musicais</p>
            </div>
            <div class="login-form">
              <form id="login-form">
                <div class="form-group">
                  <label for="email">E-mail</label>
                  <input type="email" id="email" name="email" required>
                </div>
                <div class="form-group">
                  <label for="password">Senha</label>
                  <input type="password" id="password" name="password" required>
                </div>
                <div class="form-group">
                  <button type="submit" class="btn btn-primary">Entrar</button>
                </div>
              </form>
            </div>
          </div>
        </div>

        <!-- Página Dashboard -->
        <div class="page" id="dashboard-page">
          <h2>Dashboard</h2>
          <div class="dashboard-cards">
            <div class="card">
              <div class="card-header">
                <h3>Ensaios Hoje</h3>
              </div>
              <div class="card-body" id="today-rehearsals">
                <p>Carregando...</p>
              </div>
            </div>
            <div class="card">
              <div class="card-header">
                <h3>Eventos Próximos</h3>
              </div>
              <div class="card-body" id="upcoming-events">
                <p>Carregando...</p>
              </div>
            </div>
            <div class="card">
              <div class="card-header">
                <h3>Músicos Ativos</h3>
              </div>
              <div class="card-body" id="active-musicians">
                <p>Carregando...</p>
              </div>
            </div>
          </div>
        </div>

        <!-- Página Músicos -->
        <div class="page" id="musicians-page">
          <div class="page-header">
            <h2>Músicos</h2>
            <button class="btn btn-primary" id="add-musician-btn">Adicionar Músico</button>
          </div>
          <div class="search-container">
            <input type="text" id="musician-search" placeholder="Buscar músico...">
          </div>
          <div class="table-container">
            <table class="data-table" id="musicians-table">
              <thead>
                <tr>
                  <th>Nome</th>
                  <th>Instrumento</th>
                  <th>Telefone</th>
                  <th>Dias Disponíveis</th>
                  <th>Status</th>
                  <th>Ações</th>
                </tr>
              </thead>
              <tbody>
                <!-- Dados serão carregados via JavaScript -->
              </tbody>
            </table>
          </div>
        </div>

        <!-- Página Ensaios -->
        <div class="page" id="rehearsals-page">
          <div class="page-header">
            <h2>Ensaios</h2>
            <button class="btn btn-primary" id="add-rehearsal-btn">Adicionar Ensaio</button>
          </div>
          <div class="search-container">
            <input type="date" id="rehearsal-date-filter">
            <input type="text" id="rehearsal-search" placeholder="Buscar ensaio...">
          </div>
          <div class="table-container">
            <table class="data-table" id="rehearsals-table">
              <thead>
                <tr>
                  <th>Título</th>
                  <th>Data</th>
                  <th>Horário</th>
                  <th>Local</th>
                  <th>Músicos</th>
                  <th>Ações</th>
                </tr>
              </thead>
              <tbody>
                <!-- Dados serão carregados via JavaScript -->
              </tbody>
            </table>
          </div>
        </div>

        <!-- Página Eventos -->
        <div class="page" id="events-page">
          <div class="page-header">
            <h2>Eventos</h2>
            <button class="btn btn-primary" id="add-event-btn">Adicionar Evento</button>
          </div>
          <div class="search-container">
            <input type="date" id="event-date-filter">
            <input type="text" id="event-search" placeholder="Buscar evento...">
          </div>
          <div class="table-container">
            <table class="data-table" id="events-table">
              <thead>
                <tr>
                  <th>Título</th>
                  <th>Data</th>
                  <th>Horário</th>
                  <th>Local</th>
                  <th>Tipo</th>
                  <th>Músicos</th>
                  <th>Ações</th>
                </tr>
              </thead>
              <tbody>
                <!-- Dados serão carregados via JavaScript -->
              </tbody>
            </table>
          </div>
        </div>

        <!-- Página Agenda -->
        <div class="page" id="schedule-page">
          <div class="page-header">
            <h2>Agenda</h2>
          </div>
          <div class="calendar-container">
            <div class="calendar-header">
              <button id="prev-month" class="btn"><i class="fas fa-chevron-left"></i></button>
              <h3 id="current-month">Carregando...</h3>
              <button id="next-month" class="btn"><i class="fas fa-chevron-right"></i></button>
            </div>
            <div class="calendar" id="calendar">
              <!-- Calendário será gerado via JavaScript -->
            </div>
          </div>
          <div class="day-events" id="day-events">
            <h3 id="selected-date">Selecione uma data</h3>
            <div id="day-events-list">
              <!-- Eventos do dia selecionado serão carregados via JavaScript -->
            </div>
          </div>
        </div>

        <!-- Página Usuários (apenas admin) -->
        <div class="page admin-only" id="users-page">
          <div class="page-header">
            <h2>Usuários</h2>
            <button class="btn btn-primary" id="add-user-btn">Adicionar Usuário</button>
          </div>
          <div class="table-container">
            <table class="data-table" id="users-table">
              <thead>
                <tr>
                  <th>Nome</th>
                  <th>E-mail</th>
                  <th>Função</th>
                  <th>Data de Criação</th>
                  <th>Ações</th>
                </tr>
              </thead>
              <tbody>
                <!-- Dados serão carregados via JavaScript -->
              </tbody>
            </table>
          </div>
        </div>
      </div>
    </main>
  </div>

  <!-- Modais -->
  <!-- Modal Músico -->
  <div class="modal" id="musician-modal">
    <div class="modal-content">
      <div class="modal-header">
        <h3 id="musician-modal-title">Adicionar Músico</h3>
        <button class="modal-close">&times;</button>
      </div>
      <div class="modal-body">
        <form id="musician-form">
          <input type="hidden" id="musician-id">
          <div class="form-group">
            <label for="musician-name">Nome</label>
            <input type="text" id="musician-name" name="name" required>
          </div>
          <div class="form-group">
            <label for="musician-phone">Telefone</label>
            <input type="text" id="musician-phone" name="phone" required>
          </div>
          <div class="form-group">
            <label for="musician-instrument">Instrumento</label>
            <input type="text" id="musician-instrument" name="instrument" required>
          </div>
          <div class="form-group checkbox-group">
            <label>É organista?</label>
            <input type="checkbox" id="musician-is-organist" name="isOrganist">
          </div>
          <div class="form-group">
            <label>Dias Disponíveis</label>
            <div class="days-checkboxes">
              <div>
                <input type="checkbox" id="day-sunday" name="availableDays.sunday">
                <label for="day-sunday">Domingo</label>
              </div>
              <div>
                <input type="checkbox" id="day-monday" name="availableDays.monday">
                <label for="day-monday">Segunda</label>
              </div>
              <div>
                <input type="checkbox" id="day-tuesday" name="availableDays.tuesday">
                <label for="day-tuesday">Terça</label>
              </div>
              <div>
                <input type="checkbox" id="day-wednesday" name="availableDays.wednesday">
                <label for="day-wednesday">Quarta</label>
              </div>
              <div>
                <input type="checkbox" id="day-thursday" name="availableDays.thursday">
                <label for="day-thursday">Quinta</label>
              </div>
              <div>
                <input type="checkbox" id="day-friday" name="availableDays.friday">
                <label for="day-friday">Sexta</label>
              </div>
              <div>
                <input type="checkbox" id="day-saturday" name="availableDays.saturday">
                <label for="day-saturday">Sábado</label>
              </div>
            </div>
          </div>
          <div class="form-group">
            <label for="musician-notes">Observações</label>
            <textarea id="musician-notes" name="notes"></textarea>
          </div>
          <div class="form-group checkbox-group">
            <label>Ativo</label>
            <input type="checkbox" id="musician-active" name="active" checked>
          </div>
        </form>
      </div>
      <div class="modal-footer">
        <button class="btn btn-secondary modal-close">Cancelar</button>
        <button class="btn btn-primary" id="save-musician-btn">Salvar</button>
      </div>
    </div>
  </div>

  <!-- Modal Ensaio -->
  <div class="modal" id="rehearsal-modal">
    <div class="modal-content">
      <div class="modal-header">
        <h3 id="rehearsal-modal-title">Adicionar Ensaio</h3>
        <button class="modal-close">&times;</button>
      </div>
      <div class="modal-body">
        <form id="rehearsal-form">
          <input type="hidden" id="rehearsal-id">
          <div class="form-group">
            <label for="rehearsal-title">Título</label>
            <input type="text" id="rehearsal-title" name="title" required>
          </div>
          <div class="form-group">
            <label for="rehearsal-date">Data</label>
            <input type="date" id="rehearsal-date" name="date" required>
          </div>
          <div class="form-group">
            <label for="rehearsal-start-time">Horário de Início</label>
            <input type="time" id="rehearsal-start-time" name="startTime" required>
          </div>
          <div class="form-group">
            <label for="rehearsal-end-time">Horário de Término</label>
            <input type="time" id="rehearsal-end-time" name="endTime" required>
          </div>
          <div class="form-group">
            <label for="rehearsal-location">Local</label>
            <input type="text" id="rehearsal-location" name="location" required>
          </div>
          <div class="form-group">
            <label for="rehearsal-description">Descrição</label>
            <textarea id="rehearsal-description" name="description"></textarea>
          </div>
          <div class="form-group">
            <label>Repertório</label>
            <div id="rehearsal-repertoire-list">
              <!-- Lista de repertório será gerada via JavaScript -->
            </div>
            <button type="button" class="btn btn-secondary" id="add-repertoire-item">Adicionar Item</button>
          </div>
        </form>
      </div>
      <div class="modal-footer">
        <button class="btn btn-secondary modal-close">Cancelar</button>
        <button class="btn btn-primary" id="save-rehearsal-btn">Salvar</button>
      </div>
    </div>
  </div>

  <!-- Modal Evento -->
  <div class="modal" id="event-modal">
    <div class="modal-content">
      <div class="modal-header">
        <h3 id="event-modal-title">Adicionar Evento</h3>
        <button class="modal-close">&times;</button>
      </div>
      <div class="modal-body">
        <form id="event-form">
          <input type="hidden" id="event-id">
          <div class="form-group">
            <label for="event-title">Título</label>
            <input type="text" id="event-title" name="title" required>
          </div>
          <div class="form-group">
            <label for="event-date">Data</label>
            <input type="date" id="event-date" name="date" required>
          </div>
          <div class="form-group">
            <label for="event-start-time">Horário de Início</label>
            <input type="time" id="event-start-time" name="startTime" required>
          </div>
          <div class="form-group">
            <label for="event-end-time">Horário de Término</label>
            <input type="time" id="event-end-time" name="endTime" required>
          </div>
          <div class="form-group">
            <label for="event-location">Local</label>
            <input type="text" id="event-location" name="location" required>
          </div>
          <div class="form-group">
            <label for="event-type">Tipo de Evento</label>
            <select id="event-type" name="eventType">
              <option value="concerto">Concerto</option>
              <option value="cerimonia">Cerimônia</option>
              <option value="culto">Culto</option>
              <option value="outro">Outro</option>
            </select>
          </div>
          <div class="form-group">
            <label for="event-description">Descrição</label>
            <textarea id="event-description" name="description"></textarea>
          </div>
          <div class="form-group">
            <label>Repertório</label>
            <div id="event-repertoire-list">
              <!-- Lista de repertório será gerada via JavaScript -->
            </div>
            <button type="button" class="btn btn-secondary" id="add-event-repertoire-item">Adicionar Item</button>
          </div>
        </form>
      </div>
      <div class="modal-footer">
        <button class="btn btn-secondary modal-close">Cancelar</button>
        <button class="btn btn-primary" id="save-event-btn">Salvar</button>
      </div>
    </div>
  </div>

  <!-- Modal Músicos do Ensaio/Evento -->
  <div class="modal" id="musicians-list-modal">
    <div class="modal-content">
      <div class="modal-header">
        <h3 id="musicians-list-modal-title">Músicos</h3>
        <button class="modal-close">&times;</button>
      </div>
      <div class="modal-body">
        <div class="search-container">
          <input type="text" id="musicians-list-search" placeholder="Buscar músico...">
        </div>
        <div class="musicians-list" id="musicians-list">
          <!-- Lista de músicos será gerada via JavaScript -->
        </div>
      </div>
      <div class="modal-footer">
        <button class="btn btn-secondary modal-close">Fechar</button>
      </div>
    </div>
  </div>

  <!-- Modal Usuário -->
  <div class="modal admin-only" id="user-modal">
    <div class="modal-content">
      <div class="modal-header">
        <h3 id="user-modal-title">Adicionar Usuário</h3>
        <button class="modal-close">&times;</button>
      </div>
      <div class="modal-body">
        <form id="user-form">
          <input type="hidden" id="user-id">
          <div class="form-group">
            <label for="user-name">Nome</label>
            <input type="text" id="user-name" name="name" required>
          </div>
          <div class="form-group">
            <label for="user-email">E-mail</label>
            <input type="email" id="user-email" name="email" required>
          </div>
          <div class="form-group">
            <label for="user-password">Senha</label>
            <input type="password" id="user-password" name="password">
            <small>Deixe em branco para manter a senha atual (ao editar)</small>
          </div>
          <div class="form-group">
            <label for="user-role">Função</label>
            <select id="user-role" name="role">
              <option value="user">Usuário</option>
              <option value="coordinator">Coordenador</option>
              <option value="admin">Administrador</option>
            </select>
          </div>
        </form>
      </div>
      <div class="modal-footer">
        <button class="btn btn-secondary modal-close">Cancelar</button>
        <button class="btn btn-primary" id="save-user-btn">Salvar</button>
      </div>
    </div>
  </div>

  <!-- Scripts -->
  <script src="js/api.js"></script>
  <script src="js/auth.js"></script>
  <script src="js/ui.js"></script>
  <script src="js/musicians.js"></script>
  <script src="js/rehearsals.js"></script>
  <script src="js/events.js"></script>
  <script src="js/schedule.js"></script>
  <script src="js/users.js"></script>
  <script src="js/app.js"></script>
  <script src="js/buttons.js"></script>
</body>
</html>